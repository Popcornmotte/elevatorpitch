[gd_scene load_steps=40 format=3 uid="uid://dn1h17rgyu5yq"]

[ext_resource type="Script" path="res://Scripts/hangar.gd" id="1_7h618"]
[ext_resource type="PackedScene" uid="uid://cbnpyi0uo1evc" path="res://Scenes/Objects/ladder.tscn" id="2_vpx34"]
[ext_resource type="PackedScene" uid="uid://xcgdf4cn2vir" path="res://Scenes/Objects/player.tscn" id="3_4b3ci"]
[ext_resource type="Texture2D" uid="uid://du4run1n7hwqk" path="res://Assets/Sprites/Hangar/layer0.png" id="3_07q7o"]
[ext_resource type="Texture2D" uid="uid://da6lopna0so63" path="res://Assets/Sprites/Hangar/layer1.png" id="4_xjuvv"]
[ext_resource type="Texture2D" uid="uid://3oj5nh0bnxnq" path="res://Assets/Sprites/Hangar/layer2.png" id="5_y2ten"]
[ext_resource type="Texture2D" uid="uid://d4jw16trahn4f" path="res://Assets/Sprites/Hangar/layer3.png" id="6_u8q84"]
[ext_resource type="Texture2D" uid="uid://7bo5dfbwoqi7" path="res://Assets/Sprites/Hangar/layer4.png" id="7_3xxor"]
[ext_resource type="PackedScene" uid="uid://bjgjo60texco1" path="res://Scenes/Objects/elevator.tscn" id="9_yyd37"]
[ext_resource type="Texture2D" uid="uid://dyli07gucg4i" path="res://Assets/Sprites/largeButton.png" id="11_2gq7s"]
[ext_resource type="Script" path="res://Scripts/generic_claw_grabbable.gd" id="12_b7ptf"]
[ext_resource type="Texture2D" uid="uid://cfemphjpttb6r" path="res://Assets/Sprites/truck.png" id="12_t5dm1"]
[ext_resource type="Texture2D" uid="uid://em8ovy0rq3jl" path="res://Assets/Sprites/FX/cone.png" id="13_rvsa6"]
[ext_resource type="Texture2D" uid="uid://bgkjkvklvto1i" path="res://Assets/Sprites/Claws/Test0/TestArm.png" id="14_2xlwc"]
[ext_resource type="Texture2D" uid="uid://bncium1i82qj0" path="res://Assets/Sprites/hatchButtonSign.png" id="15_pntbt"]
[ext_resource type="PackedScene" uid="uid://bqvnuucs4llig" path="res://Scenes/Objects/tutorial_textbox.tscn" id="16_nd0oi"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_3a0ag"]
size = Vector2(960, 128)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_xi66o"]
size = Vector2(64, 128)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_qlhwc"]
size = Vector2(320, 128)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_wpda6"]
size = Vector2(64, 8)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_outgl"]
size = Vector2(192, 104)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_r8eyn"]
size = Vector2(160, 80)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_6nr05"]
size = Vector2(192, 160)

[sub_resource type="Animation" id="Animation_jf0p8"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Elevator:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, 0)]
}

[sub_resource type="Animation" id="Animation_j5ujy"]
resource_name = "elevatorRise"
length = 4.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Elevator:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(1, 1.1, 4),
"transitions": PackedFloat32Array(2, 2, 1),
"update": 0,
"values": [Vector2(0, 0), Vector2(0, 5), Vector2(0, -1000)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_0vt87"]
_data = {
"RESET": SubResource("Animation_jf0p8"),
"elevatorRise": SubResource("Animation_j5ujy")
}

[sub_resource type="RectangleShape2D" id="RectangleShape2D_gwyhd"]
size = Vector2(64, 24)

[sub_resource type="AtlasTexture" id="AtlasTexture_ft47m"]
atlas = ExtResource("11_2gq7s")
region = Rect2(0, 0, 32, 8)

[sub_resource type="AtlasTexture" id="AtlasTexture_nc302"]
atlas = ExtResource("11_2gq7s")
region = Rect2(0, 8, 32, 8)

[sub_resource type="AtlasTexture" id="AtlasTexture_qa0lc"]
atlas = ExtResource("11_2gq7s")
region = Rect2(0, 16, 32, 8)

[sub_resource type="SpriteFrames" id="SpriteFrames_uttrf"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ft47m")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_nc302")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qa0lc")
}],
"loop": false,
"name": &"default",
"speed": 8.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ql7la"]
size = Vector2(32, 8)

[sub_resource type="AtlasTexture" id="AtlasTexture_vupqt"]
atlas = ExtResource("15_pntbt")
region = Rect2(0, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_8n5vf"]
atlas = ExtResource("15_pntbt")
region = Rect2(0, 64, 64, 64)

[sub_resource type="SpriteFrames" id="SpriteFrames_gfr7m"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_vupqt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8n5vf")
}],
"loop": true,
"name": &"default",
"speed": 2.0
}]

[sub_resource type="Animation" id="Animation_qcpgc"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("ButtonArm:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [1.63712]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("ButtonArm/LowerArm:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [2.87979]
}

[sub_resource type="Animation" id="Animation_c7haq"]
resource_name = "deployButton"
length = 1.2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("ButtonArm:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.4, 0.6, 0.8),
"transitions": PackedFloat32Array(1.7411, 0.517633, 1.93187, 1),
"update": 0,
"values": [1.63712, 0.523598, 0.606614, 0.523599]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("ButtonArm/LowerArm:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0.2, 0.6, 0.8, 1, 1.2),
"transitions": PackedFloat32Array(2, 0.5, 2, 0.517632, 1),
"update": 0,
"values": [2.87979, 0.934033, 1.10872, 0.933751, 0.96619]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_w4qtg"]
_data = {
"RESET": SubResource("Animation_qcpgc"),
"deployButton": SubResource("Animation_c7haq")
}

[sub_resource type="RectangleShape2D" id="RectangleShape2D_uavan"]
size = Vector2(160, 30)

[node name="Hangar" type="Node2D" node_paths=PackedStringArray("crateSpawnArea", "brake", "button")]
script = ExtResource("1_7h618")
crateSpawnArea = NodePath("spawnAreas/crateSpawnArea")
brake = NodePath("Elevator/interior/Brake")
button = NodePath("ButtonArm/LowerArm/HatchButton")

[node name="Collision" type="StaticBody2D" parent="."]
collision_layer = 524305
collision_mask = 524337

[node name="CollisionShape2D" type="CollisionShape2D" parent="Collision"]
position = Vector2(160, 256)
shape = SubResource("RectangleShape2D_3a0ag")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="Collision"]
position = Vector2(-288, 256)
shape = SubResource("RectangleShape2D_xi66o")

[node name="CollisionShape2D3" type="CollisionShape2D" parent="Collision"]
position = Vector2(-224, 384)
shape = SubResource("RectangleShape2D_xi66o")

[node name="CollisionShape2D4" type="CollisionShape2D" parent="Collision"]
position = Vector2(-608, 384)
shape = SubResource("RectangleShape2D_xi66o")

[node name="CollisionShape2D5" type="CollisionShape2D" parent="Collision"]
position = Vector2(-416, 512)
shape = SubResource("RectangleShape2D_qlhwc")

[node name="CollisionShape2D6" type="CollisionShape2D" parent="Collision"]
position = Vector2(-544, 256)
shape = SubResource("RectangleShape2D_qlhwc")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Collision"]
polygon = PackedVector2Array(384, 192, 512, 0, 384, -320, 96, -408, 96, -512, 640, -512, 640, 192)

[node name="CollisionShape2D8" type="CollisionShape2D" parent="Collision"]
position = Vector2(-352, 196)
shape = SubResource("RectangleShape2D_wpda6")

[node name="CollisionPolygon2D2" type="CollisionPolygon2D" parent="Collision"]
polygon = PackedVector2Array(-384, 192, -512, 0, -384, -320, -96, -408, -96, -512, -640, -512, -640, 192)

[node name="ItemBlockers" type="StaticBody2D" parent="."]
position = Vector2(0, -448)
collision_layer = 129
collision_mask = 129

[node name="CollisionShape2D" type="CollisionShape2D" parent="ItemBlockers"]
position = Vector2(0, -12)
shape = SubResource("RectangleShape2D_outgl")

[node name="CollisionShape2D9" type="CollisionShape2D" parent="ItemBlockers"]
position = Vector2(0, 600)
shape = SubResource("RectangleShape2D_r8eyn")

[node name="Background" type="Node2D" parent="."]
z_index = -25

[node name="Black" type="Polygon2D" parent="Background"]
visible = false
z_index = -5
color = Color(0, 0, 0, 1)
polygon = PackedVector2Array(-1800, -1200, 1800, -1200, 1800, 1200, -1800, 1200)

[node name="Polygon2D" type="Polygon2D" parent="Background"]
color = Color(0.0980392, 0.0980392, 0.0980392, 1)
polygon = PackedVector2Array(-320, 192, -320, 320, -256, 320, -256, 448, -576, 448, -576, 320, -384, 320, -384, 192, -1088, 192, -1088, 1152, 1280, 1152, 1280, 192)

[node name="ParallaxBackground" type="ParallaxBackground" parent="Background"]

[node name="ParallaxLayer" type="ParallaxLayer" parent="Background/ParallaxBackground"]

[node name="Layer0" type="Sprite2D" parent="Background/ParallaxBackground/ParallaxLayer"]
position = Vector2(0, -8)
scale = Vector2(2, 2)
texture = ExtResource("3_07q7o")

[node name="ParallaxLayer2" type="ParallaxLayer" parent="Background/ParallaxBackground"]
z_index = -2
motion_scale = Vector2(1, 0.8)

[node name="Layer1" type="Sprite2D" parent="Background/ParallaxBackground/ParallaxLayer2"]
scale = Vector2(2, 2)
texture = ExtResource("4_xjuvv")

[node name="ParallaxLayer3" type="ParallaxLayer" parent="Background/ParallaxBackground"]
z_index = -3
motion_scale = Vector2(1, 0.7)

[node name="Layer2" type="Sprite2D" parent="Background/ParallaxBackground/ParallaxLayer3"]
position = Vector2(0, 8)
scale = Vector2(2, 2)
texture = ExtResource("5_y2ten")

[node name="ParallaxLayer4" type="ParallaxLayer" parent="Background/ParallaxBackground"]
z_index = -4
motion_scale = Vector2(1, 0.6)

[node name="Layer3" type="Sprite2D" parent="Background/ParallaxBackground/ParallaxLayer4"]
position = Vector2(0, 16)
scale = Vector2(2, 2)
texture = ExtResource("6_u8q84")

[node name="ParallaxLayer5" type="ParallaxLayer" parent="Background/ParallaxBackground"]
z_index = -5
motion_scale = Vector2(1, 0.5)

[node name="Layer4" type="Sprite2D" parent="Background/ParallaxBackground/ParallaxLayer5"]
position = Vector2(0, 24)
scale = Vector2(2, 2)
texture = ExtResource("7_3xxor")

[node name="player" parent="." instance=ExtResource("3_4b3ci")]
z_index = 4
position = Vector2(-400, 432)

[node name="Elevator" parent="." instance=ExtResource("9_yyd37")]
moving = false

[node name="EngineSprite" parent="Elevator/HullBody" index="4"]
autoplay = ""

[node name="EngineSound" parent="Elevator/HullBody" index="7"]
autoplay = false

[node name="CollisionShape2D" parent="Elevator/interior/floor/edges/Lower" index="0"]
position = Vector2(0, 6)

[node name="CollisionShape2D" parent="Elevator/interior/floor/edges/Upper" index="0"]
position = Vector2(12.5, -7)

[node name="CollisionShape2D" parent="Elevator/interior/floor/edges/Left" index="0"]
position = Vector2(-5, 15.5)

[node name="Brake" parent="Elevator/interior" index="9"]
braking = true
currentSpeed = 0
locked = true

[node name="BrakeSprite" parent="Elevator/interior/Brake" index="0"]
animation = &"off_to_normal"

[node name="Dispenser" parent="Elevator/Tutorial" index="2"]
startVisible = false

[node name="spawnAreas" type="Area2D" parent="."]
position = Vector2(264, 128)

[node name="crateSpawnArea" type="CollisionShape2D" parent="spawnAreas"]
position = Vector2(24, -48)
shape = SubResource("RectangleShape2D_6nr05")

[node name="Ladders" type="Node2D" parent="."]

[node name="BedLadder" parent="Ladders" instance=ExtResource("2_vpx34")]
position = Vector2(-352, 224)

[node name="BedLadder2" parent="Ladders" instance=ExtResource("2_vpx34")]
position = Vector2(-352, 288)

[node name="BedLadder3" parent="Ladders" instance=ExtResource("2_vpx34")]
position = Vector2(-352, 352)

[node name="BedLadder4" parent="Ladders" instance=ExtResource("2_vpx34")]
position = Vector2(-352, 416)

[node name="ElevatorLadder" parent="Ladders" instance=ExtResource("2_vpx34")]
position = Vector2(-120, 160)

[node name="ElevatorLadder2" parent="Ladders" instance=ExtResource("2_vpx34")]
position = Vector2(-120, 96)

[node name="ElevatorLadder3" parent="Ladders" instance=ExtResource("2_vpx34")]
position = Vector2(-120, 32)

[node name="ElevatorLadder4" parent="Ladders" instance=ExtResource("2_vpx34")]
position = Vector2(-120, -32)

[node name="RiseSequence" type="Node2D" parent="."]

[node name="ElevatorRise" type="AnimationPlayer" parent="RiseSequence"]
root_node = NodePath("../..")
libraries = {
"": SubResource("AnimationLibrary_0vt87")
}

[node name="Timer" type="Timer" parent="RiseSequence"]
wait_time = 3.0

[node name="Truck" type="RigidBody2D" parent="."]
position = Vector2(163, 180)
collision_layer = 32899
collision_mask = 32899
script = ExtResource("12_b7ptf")

[node name="Sprite2D" type="Sprite2D" parent="Truck"]
position = Vector2(0, -4)
texture = ExtResource("12_t5dm1")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Truck"]
shape = SubResource("RectangleShape2D_gwyhd")

[node name="PointLight2D" type="PointLight2D" parent="Truck"]
position = Vector2(-82, -2)
rotation = 1.57079
texture = ExtResource("13_rvsa6")

[node name="ButtonArm" type="Node2D" parent="."]
position = Vector2(664, -128)
rotation = 1.63712

[node name="Sprite2D" type="Sprite2D" parent="ButtonArm"]
position = Vector2(0, 64)
rotation = -1.57079
texture = ExtResource("14_2xlwc")

[node name="LowerArm" type="Node2D" parent="ButtonArm"]
position = Vector2(0, 128)
rotation = 2.87979

[node name="Sprite2D2" type="Sprite2D" parent="ButtonArm/LowerArm"]
position = Vector2(0, 64)
rotation = -1.57079
texture = ExtResource("14_2xlwc")

[node name="HatchButton" type="AnimatedSprite2D" parent="ButtonArm/LowerArm"]
position = Vector2(0, 128)
scale = Vector2(2, -2)
sprite_frames = SubResource("SpriteFrames_uttrf")

[node name="Area2D" type="Area2D" parent="ButtonArm/LowerArm/HatchButton"]
collision_layer = 32768
collision_mask = 32768

[node name="CollisionShape2D" type="CollisionShape2D" parent="ButtonArm/LowerArm/HatchButton/Area2D"]
shape = SubResource("RectangleShape2D_ql7la")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="ButtonArm/LowerArm"]
z_index = -1
position = Vector2(-48.4341, 116.463)
rotation = -1.57079
sprite_frames = SubResource("SpriteFrames_gfr7m")
autoplay = "default"
frame_progress = 0.0324825

[node name="ButtonArmAnim" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_w4qtg")
}

[node name="Tutorial" type="Node2D" parent="."]

[node name="ArmStationText" parent="Tutorial" instance=ExtResource("16_nd0oi")]
position = Vector2(-40, -32)
scale = Vector2(0.75, 0.75)

[node name="Textfield" parent="Tutorial/ArmStationText" index="1"]
offset_left = -16.0
offset_bottom = 53.0

[node name="RichTextLabel" parent="Tutorial/ArmStationText/Textfield/MarginContainer" index="0"]
text = "E -> Toggle view
W/S -> Control chutes
A/D -> Control net"

[node name="ArmStationTextTrigger" type="Area2D" parent="Tutorial"]
z_index = 50
position = Vector2(0, 16)
collision_layer = 0
collision_mask = 4096

[node name="CollisionShape2D" type="CollisionShape2D" parent="Tutorial/ArmStationTextTrigger"]
position = Vector2(0, 1)
shape = SubResource("RectangleShape2D_uavan")

[node name="ArmText" parent="Tutorial" instance=ExtResource("16_nd0oi")]
position = Vector2(120, -120)
scale = Vector2(2, 2)

[node name="Textfield" parent="Tutorial/ArmText" index="1"]
offset_right = 132.0
offset_bottom = 48.0

[node name="RichTextLabel" parent="Tutorial/ArmText/Textfield/MarginContainer" index="0"]
text = "Click & hold -> Grab
Space -> Fling
Load cargo into chutes!"

[node name="BrakeText" parent="Tutorial" instance=ExtResource("16_nd0oi")]
position = Vector2(-112, 48)
scale = Vector2(0.75, 0.75)

[node name="Textfield" parent="Tutorial/BrakeText" index="1"]
offset_bottom = 21.0

[node name="RichTextLabel" parent="Tutorial/BrakeText/Textfield/MarginContainer" index="0"]
text = "W/S -> Change speed"

[connection signal="timeout" from="RiseSequence/Timer" to="." method="_on_timer_timeout"]
[connection signal="area_entered" from="ButtonArm/LowerArm/HatchButton/Area2D" to="." method="_on_area_2d_body_entered"]
[connection signal="area_entered" from="ButtonArm/LowerArm/HatchButton/Area2D" to="Tutorial/BrakeText" method="open"]
[connection signal="body_entered" from="ButtonArm/LowerArm/HatchButton/Area2D" to="." method="_on_area_2d_body_entered"]
[connection signal="body_entered" from="ButtonArm/LowerArm/HatchButton/Area2D" to="Tutorial/BrakeText" method="_on_area_2d_body_entered"]
[connection signal="body_shape_entered" from="Tutorial/ArmStationTextTrigger" to="Tutorial/ArmStationText" method="on_body_entered"]
[connection signal="body_shape_entered" from="Tutorial/ArmStationTextTrigger" to="Tutorial/ArmText" method="on_body_entered"]

[editable path="Elevator"]
[editable path="Elevator/interior"]
[editable path="Elevator/interior/Brake"]
[editable path="Elevator/Tutorial/FuelPlace"]
[editable path="Elevator/Tutorial/Valve"]
[editable path="Elevator/Tutorial/Dispenser"]
[editable path="Tutorial/ArmStationText"]
[editable path="Tutorial/ArmText"]
[editable path="Tutorial/BrakeText"]
