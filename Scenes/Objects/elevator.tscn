[gd_scene load_steps=29 format=3 uid="uid://bjgjo60texco1"]

[ext_resource type="Texture2D" uid="uid://dutcqedxo6rbd" path="res://Assets/Sprites/ElevatorBody/Legs.png" id="1_cufjr"]
[ext_resource type="Texture2D" uid="uid://cccb36kyj5imy" path="res://Assets/Sprites/ElevatorBody/Body0.png" id="1_dtexf"]
[ext_resource type="Script" path="res://Scripts/Elevator.gd" id="1_gs4x1"]
[ext_resource type="Script" path="res://Scripts/Legs.gd" id="2_2h7m3"]
[ext_resource type="Texture2D" uid="uid://cjlhqwo5wcan7" path="res://Assets/Sprites/ElevatorBody/Gear1.png" id="2_cbxhb"]
[ext_resource type="Texture2D" uid="uid://ppjssqnijl1p" path="res://Assets/Sprites/ElevatorBody/Wheel0.png" id="2_o1aa6"]
[ext_resource type="Texture2D" uid="uid://bgkjkvklvto1i" path="res://Assets/Sprites/Claws/Test0/TestArm.png" id="3_2k2nk"]
[ext_resource type="Texture2D" uid="uid://cdocs2sd6mf" path="res://Assets/Sprites/Cable.png" id="3_lmxla"]
[ext_resource type="Texture2D" uid="uid://sb47ud24jhmx" path="res://Assets/Sprites/Claws/Test0/TestClaw1.png" id="4_hs0s2"]
[ext_resource type="Texture2D" uid="uid://cps0xktem8rbd" path="res://Assets/Sprites/Claws/Test0/TestClaw0.png" id="5_xhuq0"]
[ext_resource type="Script" path="res://Scripts/Target.gd" id="6_06d2c"]
[ext_resource type="Texture2D" uid="uid://dhl16w2kryxft" path="res://Assets/Sprites/ElevatorBody/Gear0.png" id="7_xkf6p"]
[ext_resource type="Texture2D" uid="uid://qdg436exlg7u" path="res://Assets/Sprites/target.png" id="8_8ih1r"]
[ext_resource type="Script" path="res://Scripts/EffectGear.gd" id="9_3heke"]
[ext_resource type="Script" path="res://Scripts/Claw.gd" id="9_ltb0c"]
[ext_resource type="Material" uid="uid://dsthfo1lhc5ao" path="res://ParticleEffects/Sparks.tres" id="10_psx2i"]
[ext_resource type="Texture2D" uid="uid://bb36mwhht2hya" path="res://Assets/Sprites/spark.png" id="11_eb7jo"]
[ext_resource type="Script" path="res://Scripts/PhysicalArm.gd" id="17_yi1ig"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_ohd1j"]
radius = 96.0
height = 256.0

[sub_resource type="CircleShape2D" id="CircleShape2D_kdskv"]
radius = 40.0

[sub_resource type="SkeletonModification2DCCDIK" id="SkeletonModification2DCCDIK_mcf4w"]
target_nodepath = NodePath("../Targets/RightTarget")
tip_nodepath = NodePath("GearBone/UpperArmBone/LowerArmBone/TipBone")
ccdik_data_chain_length = 3
joint_data/0/bone_index = 0
joint_data/0/bone2d_node = NodePath("GearBone")
joint_data/0/rotate_from_joint = false
joint_data/0/enable_constraint = false
joint_data/0/editor_draw_gizmo = true
joint_data/1/bone_index = 1
joint_data/1/bone2d_node = NodePath("GearBone/UpperArmBone")
joint_data/1/rotate_from_joint = false
joint_data/1/enable_constraint = true
joint_data/1/constraint_angle_min = -360.0
joint_data/1/constraint_angle_max = 360.0
joint_data/1/constraint_angle_invert = true
joint_data/1/constraint_in_localspace = true
joint_data/1/editor_draw_gizmo = true
joint_data/2/bone_index = 2
joint_data/2/bone2d_node = NodePath("GearBone/UpperArmBone/LowerArmBone")
joint_data/2/rotate_from_joint = false
joint_data/2/enable_constraint = true
joint_data/2/constraint_angle_min = -10.0
joint_data/2/constraint_angle_max = 185.814
joint_data/2/constraint_angle_invert = false
joint_data/2/constraint_in_localspace = true
joint_data/2/editor_draw_gizmo = true

[sub_resource type="SkeletonModification2DLookAt" id="SkeletonModification2DLookAt_jro4y"]
bone_index = 4
bone2d_node = NodePath("GearBone/UpperArmBone/LowerArmBone/ClawBone")
target_nodepath = NodePath("../Targets/RightTarget")
enable_constraint = true
constraint_angle_min = -25.789
constraint_angle_max = 100.0
constraint_angle_invert = true
constraint_in_localspace = true

[sub_resource type="SkeletonModificationStack2D" id="SkeletonModificationStack2D_hu4nd"]
enabled = true
modification_count = 2
modifications/0 = SubResource("SkeletonModification2DCCDIK_mcf4w")
modifications/1 = SubResource("SkeletonModification2DLookAt_jro4y")

[sub_resource type="SpriteFrames" id="SpriteFrames_ae1xk"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("4_hs0s2")
}],
"loop": true,
"name": &"close",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("5_xhuq0")
}],
"loop": true,
"name": &"open",
"speed": 5.0
}]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_qo5xh"]
radius = 16.3336
height = 38.2461

[sub_resource type="CircleShape2D" id="CircleShape2D_4qaus"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_haxlb"]
radius = 5.00012
height = 126.0

[sub_resource type="CircleShape2D" id="CircleShape2D_xb8wr"]
radius = 13.3417

[node name="Elevator" type="Node2D" node_paths=PackedStringArray("healthBar", "fuelBar")]
script = ExtResource("1_gs4x1")
healthBar = NodePath("HealthBar/Polygon2D")
fuelBar = NodePath("FuelBar/Polygon2D2")

[node name="Legs" type="Sprite2D" parent="."]
position = Vector2(0, 176)
texture = ExtResource("1_cufjr")
script = ExtResource("2_2h7m3")

[node name="wheelL" type="Sprite2D" parent="Legs"]
z_index = -1
position = Vector2(-29, 31)
texture = ExtResource("2_o1aa6")

[node name="wheelR" type="Sprite2D" parent="Legs"]
z_index = -1
position = Vector2(29, 31)
texture = ExtResource("2_o1aa6")

[node name="Cable" type="Node2D" parent="Legs"]
z_index = -2
position = Vector2(0, -176)

[node name="Cable0" type="Sprite2D" parent="Legs/Cable"]
texture = ExtResource("3_lmxla")

[node name="Cable1" type="Sprite2D" parent="Legs/Cable"]
position = Vector2(0, 240)
texture = ExtResource("3_lmxla")

[node name="Cable2" type="Sprite2D" parent="Legs/Cable"]
position = Vector2(0, -240)
texture = ExtResource("3_lmxla")

[node name="Cable3" type="Sprite2D" parent="Legs/Cable"]
position = Vector2(0, -480)
texture = ExtResource("3_lmxla")

[node name="Cable4" type="Sprite2D" parent="Legs/Cable"]
position = Vector2(0, 480)
texture = ExtResource("3_lmxla")

[node name="HullBody" type="StaticBody2D" parent="."]
metadata/_edit_lock_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="HullBody"]
shape = SubResource("CapsuleShape2D_ohd1j")

[node name="Hull" type="Sprite2D" parent="HullBody"]
z_index = 2
texture = ExtResource("1_dtexf")

[node name="DamageReceiver" type="Area2D" parent="HullBody"]

[node name="CollisionShape2D2" type="CollisionShape2D" parent="HullBody/DamageReceiver"]
shape = SubResource("CapsuleShape2D_ohd1j")

[node name="RightArmDeadzone" type="StaticBody2D" parent="."]
position = Vector2(96, 0)

[node name="CollisionShape2D" type="CollisionShape2D" parent="RightArmDeadzone"]
shape = SubResource("CircleShape2D_kdskv")
disabled = true

[node name="Skeleton2D" type="Skeleton2D" parent="."]
visible = false
modification_stack = SubResource("SkeletonModificationStack2D_hu4nd")
metadata/_edit_lock_ = true

[node name="GearBone" type="Bone2D" parent="Skeleton2D"]
position = Vector2(97, 0)
rotation = 0.387332
rest = Transform2D(0.92592, 0.377719, -0.377719, 0.92592, 97, 0)

[node name="GearSprite" type="Sprite2D" parent="Skeleton2D/GearBone"]
z_index = -1
texture = ExtResource("2_cbxhb")

[node name="UpperArmBone" type="Bone2D" parent="Skeleton2D/GearBone"]
position = Vector2(7.00004, -1.14441e-05)
rest = Transform2D(1, 0, 0, 1, 7, 0)

[node name="UpperArmSprite" type="Sprite2D" parent="Skeleton2D/GearBone/UpperArmBone"]
z_index = -2
position = Vector2(64, 0)
texture = ExtResource("3_2k2nk")

[node name="LowerArmBone" type="Bone2D" parent="Skeleton2D/GearBone/UpperArmBone"]
position = Vector2(128.002, 5.72205e-05)
rotation = -0.174533
scale = Vector2(1, 1)
rest = Transform2D(0.737913, -0.674895, 0.674895, 0.737913, 128, 0)

[node name="LowerArmSprite" type="Sprite2D" parent="Skeleton2D/GearBone/UpperArmBone/LowerArmBone"]
z_index = -2
position = Vector2(64, 0)
texture = ExtResource("3_2k2nk")

[node name="GearSprite" type="Sprite2D" parent="Skeleton2D/GearBone/UpperArmBone/LowerArmBone"]
texture = ExtResource("7_xkf6p")

[node name="TipBone" type="Bone2D" parent="Skeleton2D/GearBone/UpperArmBone/LowerArmBone"]
position = Vector2(154, 2.33574)
rotation = 0.103699
scale = Vector2(0.999995, 0.999995)
rest = Transform2D(1, 0, 0, 1, 26.1027, -0.368178)
auto_calculate_length_and_angle = false
length = 16.0
bone_angle = 0.0

[node name="ClawBone" type="Bone2D" parent="Skeleton2D/GearBone/UpperArmBone/LowerArmBone"]
position = Vector2(128, 0)
rotation = 0.289078
rest = Transform2D(0.930478, 0.366254, -0.366254, 0.930478, 128.007, 0.000183105)
metadata/_local_pose_override_enabled_ = true

[node name="Claw" type="AnimatableBody2D" parent="Skeleton2D/GearBone/UpperArmBone/LowerArmBone/ClawBone"]
collision_layer = 2
collision_mask = 0
script = ExtResource("9_ltb0c")

[node name="ClawSprite" type="AnimatedSprite2D" parent="Skeleton2D/GearBone/UpperArmBone/LowerArmBone/ClawBone/Claw"]
position = Vector2(26, 3.8147e-06)
sprite_frames = SubResource("SpriteFrames_ae1xk")
animation = &"open"

[node name="CollisionShape2D" type="CollisionShape2D" parent="Skeleton2D/GearBone/UpperArmBone/LowerArmBone/ClawBone/Claw"]
shape = SubResource("CapsuleShape2D_qo5xh")

[node name="Targets" type="Node2D" parent="."]

[node name="RightTarget" type="CharacterBody2D" parent="Targets" node_paths=PackedStringArray("Emitter")]
position = Vector2(501, 53)
script = ExtResource("6_06d2c")
Emitter = NodePath("../../VisualEffects/Sparks")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Targets/RightTarget"]
shape = SubResource("CircleShape2D_4qaus")
disabled = true

[node name="Sprite2D" type="Sprite2D" parent="Targets/RightTarget"]
texture = ExtResource("8_8ih1r")

[node name="VisualEffects" type="Node2D" parent="."]

[node name="Sparks" type="GPUParticles2D" parent="VisualEffects"]
position = Vector2(96, 0)
emitting = false
process_material = ExtResource("10_psx2i")
texture = ExtResource("11_eb7jo")
trail_enabled = true

[node name="EffectGear0" type="Sprite2D" parent="VisualEffects" node_paths=PackedStringArray("TargetGear")]
z_index = -1
position = Vector2(96, -40)
texture = ExtResource("7_xkf6p")
script = ExtResource("9_3heke")
TargetGear = NodePath("../../PhysicalArm/UpperArm")

[node name="EffectGear1" type="Sprite2D" parent="VisualEffects" node_paths=PackedStringArray("TargetGear")]
z_index = -1
position = Vector2(96, 40)
texture = ExtResource("7_xkf6p")
script = ExtResource("9_3heke")
TargetGear = NodePath("../../PhysicalArm/UpperArm")

[node name="PhysicalArm" type="Node2D" parent="." node_paths=PackedStringArray("upperArmRef", "lowerArmRef", "clawRef")]
script = ExtResource("17_yi1ig")
upperArmRef = NodePath("../Skeleton2D/GearBone/UpperArmBone")
lowerArmRef = NodePath("../Skeleton2D/GearBone/UpperArmBone/LowerArmBone")
clawRef = NodePath("../Skeleton2D/GearBone/UpperArmBone/LowerArmBone/ClawBone")
acceleration = 500.0

[node name="UpperArm" type="RigidBody2D" parent="PhysicalArm"]
position = Vector2(96, 0)
mass = 50.0
gravity_scale = 0.0

[node name="PinJoint2D" type="PinJoint2D" parent="PhysicalArm/UpperArm"]
rotation = 1.5708
node_a = NodePath("../../../HullBody")
node_b = NodePath("..")

[node name="PhysicalArmGear" type="Sprite2D" parent="PhysicalArm/UpperArm/PinJoint2D"]
z_index = 1
texture = ExtResource("2_cbxhb")

[node name="CollisionShape2D" type="CollisionShape2D" parent="PhysicalArm/UpperArm"]
position = Vector2(76, 0)
rotation = 1.57079
shape = SubResource("CapsuleShape2D_haxlb")

[node name="Sprite2D" type="Sprite2D" parent="PhysicalArm/UpperArm"]
position = Vector2(76, 0)
texture = ExtResource("3_2k2nk")
flip_v = true

[node name="Polygon2D" type="Polygon2D" parent="PhysicalArm/UpperArm"]
z_index = -1
position = Vector2(1.4, -3.8)
scale = Vector2(1.06667, 1.06667)
polygon = PackedVector2Array(138.375, 10.125, 137, -3.00002, -6.00001, -2.99998, -6, 10.125)

[node name="LowerArm" type="RigidBody2D" parent="PhysicalArm/UpperArm"]
position = Vector2(146, 0)
mass = 50.0
gravity_scale = 0.0

[node name="CollisionShape2D" type="CollisionShape2D" parent="PhysicalArm/UpperArm/LowerArm"]
position = Vector2(68, 0)
rotation = 1.57079
shape = SubResource("CapsuleShape2D_haxlb")

[node name="Polygon2D" type="Polygon2D" parent="PhysicalArm/UpperArm/LowerArm"]
color = Color(0.698039, 0.698039, 0.698039, 1)
polygon = PackedVector2Array(132, 7, 132, -7, -2, -7, -2, 7)

[node name="Sprite2D2" type="Sprite2D" parent="PhysicalArm/UpperArm/LowerArm"]
z_index = 1
position = Vector2(68, 0)
texture = ExtResource("3_2k2nk")
flip_v = true

[node name="PinJoint2D" type="PinJoint2D" parent="PhysicalArm/UpperArm/LowerArm"]
node_a = NodePath("../..")
node_b = NodePath("..")

[node name="Claw" type="RigidBody2D" parent="PhysicalArm/UpperArm/LowerArm"]
position = Vector2(138, 0)

[node name="CollisionShape2D" type="CollisionShape2D" parent="PhysicalArm/UpperArm/LowerArm/Claw"]
position = Vector2(6, 0)
shape = SubResource("CircleShape2D_xb8wr")

[node name="Polygon2D" type="Polygon2D" parent="PhysicalArm/UpperArm/LowerArm/Claw"]
polygon = PackedVector2Array(-8, -8, -8, 8, 1, 14, 17, 19, 39, 2, 17, 13, 3, 8, 2, -8, 14, -14, 38, -8, 14, -24)

[node name="PinJoint2D" type="PinJoint2D" parent="PhysicalArm/UpperArm/LowerArm/Claw"]
node_a = NodePath("../..")
node_b = NodePath("..")

[node name="HealthBar" type="Node2D" parent="."]
position = Vector2(143, -162)

[node name="Polygon2D" type="Polygon2D" parent="HealthBar"]
color = Color(0, 1, 0, 0.537255)
polygon = PackedVector2Array(0, -14, 0, 14, 127, 14, 127, -14)

[node name="RichTextLabel" type="RichTextLabel" parent="HealthBar"]
custom_minimum_size = Vector2(70, 0)
offset_left = -58.0
offset_top = -14.0
offset_right = 12.0
offset_bottom = 26.0
text = "Health"
scroll_active = false

[node name="FuelBar" type="Node2D" parent="."]
position = Vector2(143, -126)

[node name="Polygon2D2" type="Polygon2D" parent="FuelBar"]
color = Color(0.705882, 0.380392, 0, 0.537255)
polygon = PackedVector2Array(0, -14, 0, 14, 127, 14, 127, -14)

[node name="RichTextLabel2" type="RichTextLabel" parent="FuelBar"]
custom_minimum_size = Vector2(70, 0)
offset_left = -39.0
offset_top = -13.0
offset_right = 31.0
offset_bottom = 27.0
text = "Fuel"
scroll_active = false

[connection signal="area_entered" from="HullBody/DamageReceiver" to="." method="on_area_entered"]
